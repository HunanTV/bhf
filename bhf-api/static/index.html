<html>
<head>
  <title>Ajax File Uploader Plugin For Jquery</title>
  <link href="/upload/ajaxfileupload.css" type="text/css" rel="stylesheet">
  <script type="text/javascript" src="/upload/jquery.js"></script>
  <script type="text/javascript" src="/upload/ajaxfileupload.js"></script>
  <script type="text/javascript" src="/upload/test.js"></script>
</head>

<body>
<div id="wrapper">
  <div id="content">
    <h1>Ajax File Upload Demo</h1>
    <p>Jquery File Upload Plugin  - upload your files with only one input field</p>
    <p>
      need any Web-based Information System?<br> Please <a href="http://www.phpletter.com/">Contact Us</a><br>
      We are specialized in <br>
    <ul>
      <li>Website Design</li>
      <li>Survey System Creation</li>
      <li>E-commerce Site Development</li>
    </ul>
    <img id="loading" src="loading.gif" style="display:none;">
    <form name="form" action="" method="POST" enctype="multipart/form-data">
      <table cellpadding="0" cellspacing="0" class="tableForm">

        <thead>
        <tr>
          <th>Please select a file and click Upload button</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td><input id="fileToUpload" type="file" size="45" name="attachment" class="input"></td>			</tr>

        </tbody>
        <tfoot>
        <tr>
          <td><button class="button" id="buttonUpload" onclick="return ajaxFileUpload();">Upload</button></td>
        </tr>
        </tfoot>

      </table>
    </form>
  </div>

  <script type="text/javascript">

    function ajaxFileUpload()
    {
      $("#loading")
          .ajaxStart(function(){
            $(this).show();
          })
          .ajaxComplete(function(){
            $(this).hide();
          });

      $.ajaxFileUpload
      (
          {
            url:'/api/project/13/attachment',
            secureuri:false,
            fileElementId:'fileToUpload',
            dataType: 'json',
            data:{name:'logan', id:'id'},
            success: function (data, status)
            {
              if(typeof(data.error) != 'undefined')
              {
                if(data.error != '')
                {
                  alert(data.error);
                }else
                {
                  alert(data.msg);
                }
              }
            },
            error: function (data, status, e)
            {
             console.log(arguments)
              alert(e);
            }
          }
      )

      return false;

    }

    //signUp()
    //changeStatus(21, "进行中")
    signIn(function(){
      //postProject()
      //postComment(3)
      //getMember()
    })
  </script>
</body>
</html>